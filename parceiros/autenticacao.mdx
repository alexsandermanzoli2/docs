---
title: 'Autenticação - API Parceiros'
description: 'Como autenticar suas requisições na API de Parceiros'
---

## Visão Geral

A API de Parceiros utiliza **Basic Authentication** (Autenticação Básica) para proteger o acesso aos endpoints. Este método requer que você envie suas credenciais codificadas em Base64 no header de cada requisição.

## Formato da Autenticação

### Header de Autorização

```
Authorization: Basic base64(username:password)
```

### Exemplo de Codificação

Se suas credenciais forem:
- **Username**: `seu_usuario`
- **Password**: `sua_senha`

A string combinada seria: `seu_usuario:sua_senha`

Codificada em Base64: `c2V1X3VzdWFyaW86c3VhX3Nlbmhh`

Header final:
```
Authorization: Basic c2V1X3VzdWFyaW86c3VhX3Nlbmhh
```

<Warning>
  Nunca use credenciais reais nos exemplos. Sempre use variáveis de ambiente ou placeholders.
</Warning>

## Configuração de Variáveis de Ambiente

<Warning>
  **Segurança Crítica**: Nunca inclua suas credenciais diretamente no código. Sempre use variáveis de ambiente.
</Warning>

### 1. Configuração Local

Crie um arquivo `.env` na raiz do seu projeto:

```bash
# .env
SPEEDIO_USERNAME=seu_usuario_aqui
SPEEDIO_PASSWORD=sua_senha_aqui
```

**Importante**: Adicione `.env` ao seu `.gitignore`:

```bash
# .gitignore
.env
```

### 2. Configuração por Sistema Operacional

**Linux/macOS:**
```bash
export SPEEDIO_USERNAME="seu_usuario"
export SPEEDIO_PASSWORD="sua_senha"
```

**Windows (PowerShell):**
```powershell
$env:SPEEDIO_USERNAME="seu_usuario"
$env:SPEEDIO_PASSWORD="sua_senha"
```

**Windows (CMD):**
```cmd
set SPEEDIO_USERNAME=seu_usuario
set SPEEDIO_PASSWORD=sua_senha
```

### 3. Configuração em Produção

Para ambientes de produção, configure as variáveis através do seu provedor:

**Docker:**
```bash
docker run -e SPEEDIO_USERNAME=usuario -e SPEEDIO_PASSWORD=senha sua_aplicacao
```

**Kubernetes:**
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: speedio-credentials
data:
  username: <base64_encoded_username>
  password: <base64_encoded_password>
```

**Heroku:**
```bash
heroku config:set SPEEDIO_USERNAME=usuario
heroku config:set SPEEDIO_PASSWORD=senha
```

## Exemplos de Implementação

<CodeGroup>

```bash cURL
# Configure as variáveis de ambiente primeiro
export SPEEDIO_USERNAME="seu_usuario"
export SPEEDIO_PASSWORD="sua_senha"

curl --location 'https://api-get-leads.speedio.com.br/search_enriched_leads/cnpj?cnpjs=["21071712000171"]' \
  --header 'Content-Type: application/json' \
  --header "Authorization: Basic $(echo -n ${SPEEDIO_USERNAME}:${SPEEDIO_PASSWORD} | base64)"
```

```javascript Node.js
const axios = require('axios');

// Configure as variáveis de ambiente
const username = process.env.SPEEDIO_USERNAME;
const password = process.env.SPEEDIO_PASSWORD;

if (!username || !password) {
  throw new Error('SPEEDIO_USERNAME e SPEEDIO_PASSWORD devem estar definidas');
}

const auth = Buffer.from(`${username}:${password}`).toString('base64');

const config = {
  method: 'get',
  url: 'https://api-get-leads.speedio.com.br/search_enriched_leads/cnpj',
  params: {
    cnpjs: '["21071712000171"]'
  },
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Basic ${auth}`
  }
};

axios(config)
  .then(response => console.log(response.data))
  .catch(error => console.error(error));
```

```python Python
import requests
import base64
import os

# Configure as variáveis de ambiente
username = os.getenv('SPEEDIO_USERNAME')
password = os.getenv('SPEEDIO_PASSWORD')

if not username or not password:
    raise ValueError('SPEEDIO_USERNAME e SPEEDIO_PASSWORD devem estar definidas')

credentials = f"{username}:{password}"
encoded_credentials = base64.b64encode(credentials.encode()).decode()

url = "https://api-get-leads.speedio.com.br/search_enriched_leads/cnpj"
params = {
    "cnpjs": '["21071712000171"]'
}

headers = {
    "Content-Type": "application/json",
    "Authorization": f"Basic {encoded_credentials}"
}

response = requests.get(url, headers=headers, params=params)
print(response.json())
```

```php PHP
<?php
// Configure as variáveis de ambiente
$username = $_ENV['SPEEDIO_USERNAME'] ?? getenv('SPEEDIO_USERNAME');
$password = $_ENV['SPEEDIO_PASSWORD'] ?? getenv('SPEEDIO_PASSWORD');

if (!$username || !$password) {
    throw new Exception('SPEEDIO_USERNAME e SPEEDIO_PASSWORD devem estar definidas');
}

$auth = base64_encode($username . ':' . $password);

$curl = curl_init();

curl_setopt_array($curl, [
    CURLOPT_URL => 'https://api-get-leads.speedio.com.br/search_enriched_leads/cnpj?cnpjs=["21071712000171"]',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_ENCODING => '',
    CURLOPT_MAXREDIRS => 10,
    CURLOPT_TIMEOUT => 0,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
    CURLOPT_CUSTOMREQUEST => 'GET',
    CURLOPT_HTTPHEADER => [
        'Content-Type: application/json',
        'Authorization: Basic ' . $auth
    ],
]);

$response = curl_exec($curl);
curl_close($curl);

echo $response;
?>
```

</CodeGroup>

## Erros de Autenticação

### 401 Unauthorized

Retornado quando as credenciais são inválidas ou estão ausentes:

```json
{
  "error": {
    "code": "unauthorized",
    "message": "Invalid credentials"
  }
}
```

### 403 Forbidden

Retornado quando suas credenciais são válidas mas você não tem permissão para acessar o recurso:

```json
{
  "error": {
    "code": "forbidden",
    "message": "Access denied for this resource"
  }
}
```

## Segurança das Credenciais

<Warning>
  Nunca exponha suas credenciais em código cliente ou repositórios públicos!
</Warning>

### Melhores Práticas

<AccordionGroup>
  <Accordion title="Armazenamento Seguro">
    - Use variáveis de ambiente para armazenar credenciais
    - Nunca commite credenciais no controle de versão
    - Use ferramentas de gerenciamento de segredos em produção
    
    ```bash
    # .env file
    SPEEDIO_USERNAME=your_username
    SPEEDIO_PASSWORD=your_password
    ```
  </Accordion>

  <Accordion title="Rotação de Credenciais">
    - Rotacione suas credenciais regularmente
    - Solicite novas credenciais se houver suspeita de comprometimento
    - Mantenha um registro de quando as credenciais foram atualizadas
  </Accordion>

  <Accordion title="Uso em Produção">
    - Use HTTPS sempre (nunca HTTP)
    - Implemente retry com backoff exponencial
    - Monitore o uso das credenciais
    - Configure alertas para tentativas de acesso não autorizadas
  </Accordion>

  <Accordion title="Restrições de IP">
    Para segurança adicional, você pode solicitar que suas credenciais sejam restritas a IPs específicos:
    
    - Entre em contato com o suporte
    - Forneça a lista de IPs autorizados
    - Aguarde a confirmação da configuração
  </Accordion>
</AccordionGroup>

## Ambientes

### Produção
```
https://api-get-leads.speedio.com.br
```

### Sandbox (Testes)
```
https://sandbox-api-get-leads.speedio.com.br
```

<Info>
  Use o ambiente sandbox para desenvolvimento e testes. As credenciais são diferentes para cada ambiente.
</Info>

## Suporte

Se você tiver problemas com autenticação:

1. Verifique se as credenciais estão corretas
2. Confirme que o header Authorization está formatado corretamente
3. Teste com uma ferramenta como cURL ou Postman
4. Entre em contato com o suporte técnico

<Card
  title="Suporte Técnico"
  icon="headset"
  href="mailto:suporte-parceiros@speedio.com.br"
>
  Obtenha ajuda com autenticação
</Card>