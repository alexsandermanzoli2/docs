---
title: Validação de Dados
description: 'Valide e-mails, telefones e CNPJs em tempo real'
---

# Validação de Dados

O endpoint de validação permite verificar a validade e qualidade de e-mails, telefones e CNPJs, garantindo que você trabalhe apenas com dados confiáveis.

<Note>
  Este endpoint está em desenvolvimento baseado na especificação da API Speedio. Para informações sobre disponibilidade, entre em contato com nossa equipe.
</Note>

## URL do Endpoint

```
POST https://api-get-leads.speedio.com.br/validate
```

## Headers Obrigatórios

<ParamField header="Authorization" type="string" required>
  Basic Authentication com suas credenciais
  
  **Formato**: `Basic base64(username:password)`
</ParamField>

<ParamField header="Content-Type" type="string" required>
  Tipo de conteúdo da requisição
  
  **Valor**: `application/json`
</ParamField>

## Corpo da Requisição

<ParamField body="data" type="array" required>
  Array de objetos contendo os dados para validação
  
  <Expandable title="Estrutura do objeto">
    <ParamField body="type" type="string" required>
      Tipo de dados para validar: `email`, `phone`, `cnpj`
    </ParamField>
    <ParamField body="value" type="string" required>
      Valor a ser validado
    </ParamField>
    <ParamField body="id" type="string">
      ID opcional para identificar o item na resposta
    </ParamField>
  </Expandable>
</ParamField>

## Exemplos de Requisição

<CodeGroup>

```bash cURL
# Configure as variáveis de ambiente primeiro
export SPEEDIO_USERNAME="testuser"
export SPEEDIO_PASSWORD="spdtestuser"

# Validar múltiplos dados
curl -X POST \
  -H "Authorization: Basic $(echo -n ${SPEEDIO_USERNAME}:${SPEEDIO_PASSWORD} | base64)" \
  -H "Content-Type: application/json" \
  -d '{
    "data": [
      {
        "type": "email",
        "value": "contato@speedio.com.br",
        "id": "email_1"
      },
      {
        "type": "phone",
        "value": "+5511987654321",
        "id": "phone_1"
      },
      {
        "type": "cnpj",
        "value": "21071712000171",
        "id": "cnpj_1"
      }
    ]
  }' \
  'https://api-get-leads.speedio.com.br/validate'
```

```javascript Node.js
const axios = require('axios');

const username = process.env.SPEEDIO_USERNAME;
const password = process.env.SPEEDIO_PASSWORD;
const auth = Buffer.from(`${username}:${password}`).toString('base64');

async function validarDados(dados) {
  try {
    const response = await axios.post(
      'https://api-get-leads.speedio.com.br/validate',
      { data: dados },
      {
        headers: {
          'Authorization': `Basic ${auth}`,
          'Content-Type': 'application/json'
        }
      }
    );
    
    return response.data;
  } catch (error) {
    console.error('Erro na API:', error.response?.data || error.message);
    throw error;
  }
}

// Validar e-mail
const dadosParaValidar = [
  {
    type: 'email',
    value: 'contato@speedio.com.br',
    id: 'email_1'
  },
  {
    type: 'phone',
    value: '+5511987654321',
    id: 'phone_1'
  },
  {
    type: 'cnpj',
    value: '21071712000171',
    id: 'cnpj_1'
  }
];

validarDados(dadosParaValidar)
  .then(resultado => {
    console.log('Resultados da validação:');
    resultado.validated.forEach(item => {
      console.log(`${item.input}: ${item.valid ? '✅ Válido' : '❌ Inválido'}`);
      if (item.details.typo_suggestion) {
        console.log(`  Sugestão: ${item.details.typo_suggestion}`);
      }
    });
  })
  .catch(error => console.error('Erro:', error.message));

// Função para validar apenas e-mails
async function validarEmails(emails) {
  const dados = emails.map((email, index) => ({
    type: 'email',
    value: email,
    id: `email_${index}`
  }));
  
  return await validarDados(dados);
}

// Função para validar apenas telefones
async function validarTelefones(telefones) {
  const dados = telefones.map((telefone, index) => ({
    type: 'phone',
    value: telefone,
    id: `phone_${index}`
  }));
  
  return await validarDados(dados);
}
```

```python Python
import requests
import json
import base64
import os

username = os.getenv('SPEEDIO_USERNAME')
password = os.getenv('SPEEDIO_PASSWORD')
auth = base64.b64encode(f"{username}:{password}".encode()).decode()

def validar_dados(dados):
    """Valida uma lista de dados (emails, telefones, CNPJs)"""
    url = "https://api-get-leads.speedio.com.br/validate"
    
    headers = {
        'Authorization': f'Basic {auth}',
        'Content-Type': 'application/json'
    }
    
    payload = {'data': dados}
    
    try:
        response = requests.post(url, json=payload, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"Erro na API: {e}")
        raise

# Validar múltiplos dados
dados_para_validar = [
    {
        'type': 'email',
        'value': 'contato@speedio.com.br',
        'id': 'email_1'
    },
    {
        'type': 'phone',
        'value': '+5511987654321',
        'id': 'phone_1'
    },
    {
        'type': 'cnpj',
        'value': '21071712000171',
        'id': 'cnpj_1'
    }
]

try:
    resultado = validar_dados(dados_para_validar)
    print("Resultados da validação:")
    
    for item in resultado['validated']:
        status = "✅ Válido" if item['valid'] else "❌ Inválido"
        print(f"{item['input']}: {status}")
        
        if item['details'].get('typo_suggestion'):
            print(f"  Sugestão: {item['details']['typo_suggestion']}")
    
    print(f"\nTotal processado: {resultado['metadata']['total_processed']}")
    print(f"Créditos usados: {resultado['metadata']['credits_used']}")
    
except Exception as e:
    print(f"Erro: {e}")

def validar_emails(emails):
    """Função específica para validar e-mails"""
    dados = [
        {'type': 'email', 'value': email, 'id': f'email_{i}'} 
        for i, email in enumerate(emails)
    ]
    return validar_dados(dados)

def validar_telefones(telefones):
    """Função específica para validar telefones"""
    dados = [
        {'type': 'phone', 'value': telefone, 'id': f'phone_{i}'} 
        for i, telefone in enumerate(telefones)
    ]
    return validar_dados(dados)

def validar_cnpjs(cnpjs):
    """Função específica para validar CNPJs"""
    dados = [
        {'type': 'cnpj', 'value': cnpj, 'id': f'cnpj_{i}'} 
        for i, cnpj in enumerate(cnpjs)
    ]
    return validar_dados(dados)
```

```php PHP
<?php
$username = $_ENV['SPEEDIO_USERNAME'];
$password = $_ENV['SPEEDIO_PASSWORD'];
$auth = base64_encode($username . ':' . $password);

function validarDados($dados) {
    global $auth;
    
    $url = 'https://api-get-leads.speedio.com.br/validate';
    $payload = json_encode(['data' => $dados]);
    
    $curl = curl_init();
    
    curl_setopt_array($curl, [
        CURLOPT_URL => $url,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_POST => true,
        CURLOPT_POSTFIELDS => $payload,
        CURLOPT_HTTPHEADER => [
            'Authorization: Basic ' . $auth,
            'Content-Type: application/json'
        ]
    ]);
    
    $response = curl_exec($curl);
    $httpCode = curl_getinfo($curl, CURLINFO_HTTP_CODE);
    curl_close($curl);
    
    if ($httpCode !== 200) {
        throw new Exception("Erro na API: HTTP $httpCode");
    }
    
    return json_decode($response, true);
}

// Validar múltiplos dados
$dadosParaValidar = [
    [
        'type' => 'email',
        'value' => 'contato@speedio.com.br',
        'id' => 'email_1'
    ],
    [
        'type' => 'phone',
        'value' => '+5511987654321',
        'id' => 'phone_1'
    ],
    [
        'type' => 'cnpj',
        'value' => '21071712000171',
        'id' => 'cnpj_1'
    ]
];

try {
    $resultado = validarDados($dadosParaValidar);
    echo "Resultados da validação:\n";
    
    foreach ($resultado['validated'] as $item) {
        $status = $item['valid'] ? '✅ Válido' : '❌ Inválido';
        echo "{$item['input']}: $status\n";
        
        if (isset($item['details']['typo_suggestion'])) {
            echo "  Sugestão: {$item['details']['typo_suggestion']}\n";
        }
    }
    
    echo "\nTotal processado: {$resultado['metadata']['total_processed']}\n";
    echo "Créditos usados: {$resultado['metadata']['credits_used']}\n";
    
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}

function validarEmails($emails) {
    $dados = array_map(function($email, $index) {
        return [
            'type' => 'email',
            'value' => $email,
            'id' => "email_$index"
        ];
    }, $emails, array_keys($emails));
    
    return validarDados($dados);
}

function validarTelefones($telefones) {
    $dados = array_map(function($telefone, $index) {
        return [
            'type' => 'phone',
            'value' => $telefone,
            'id' => "phone_$index"
        ];
    }, $telefones, array_keys($telefones));
    
    return validarDados($dados);
}
?>
```

</CodeGroup>

## Resposta da API

### Resposta de Sucesso (200)

```json
{
  "success": true,
  "validated": [
    {
      "input": "contato@speedio.com.br",
      "normalized": "contato@speedio.com.br",
      "valid": true,
      "risk_level": "low",
      "confidence": 0.97,
      "type": "email",
      "id": "email_1",
      "details": {
        "syntax_valid": true,
        "domain_valid": true,
        "mx_found": true,
        "smtp_valid": true,
        "disposable": false,
        "role_account": true,
        "free_provider": false,
        "provider": "speedio.com.br",
        "typo_suggestion": null
      },
      "processing_time": 0.089
    },
    {
      "input": "+5511987654321",
      "normalized": "+55 11 98765-4321",
      "valid": true,
      "risk_level": "low",
      "confidence": 0.99,
      "type": "phone",
      "id": "phone_1",
      "details": {
        "country_code": "+55",
        "national_format": "(11) 98765-4321",
        "international_format": "+55 11 98765-4321",
        "type": "mobile",
        "carrier": "Vivo",
        "region": "São Paulo",
        "timezone": "America/Sao_Paulo"
      },
      "processing_time": 0.034
    },
    {
      "input": "21071712000171",
      "normalized": "21.071.712/0001-71",
      "valid": true,
      "risk_level": "low",
      "confidence": 1.0,
      "type": "cnpj",
      "id": "cnpj_1",
      "details": {
        "formatted": "21.071.712/0001-71",
        "digits_valid": true,
        "check_digits_valid": true,
        "status": "ATIVA",
        "company_type": "LTDA",
        "registration_date": "2014-09-19"
      },
      "processing_time": 0.012
    }
  ],
  "invalid": [
    {
      "input": "email-invalido@dominio-inexistente.xyz",
      "valid": false,
      "risk_level": "high",
      "confidence": 0.15,
      "type": "email",
      "id": "email_2",
      "details": {
        "syntax_valid": true,
        "domain_valid": false,
        "mx_found": false,
        "smtp_valid": false,
        "typo_suggestion": "email-invalido@gmail.com"
      },
      "error": "Domain does not exist"
    }
  ],
  "metadata": {
    "total_processed": 4,
    "total_valid": 3,
    "total_invalid": 1,
    "average_confidence": 0.76,
    "processing_time": 0.135,
    "credits_used": 4
  }
}
```

## Tipos de Validação

### 1. Validação de E-mail

#### Verificações Realizadas:
- **Sintaxe**: Formato do e-mail está correto
- **Domínio**: Domínio existe e é válido
- **MX Record**: Servidor de e-mail configurado
- **SMTP**: Servidor aceita conexões
- **Disposable**: E-mail temporário/descartável
- **Role Account**: Conta genérica (info@, contato@)
- **Free Provider**: Provedor gratuito (Gmail, Hotmail)

#### Campos Específicos:

<ResponseField name="provider" type="string">
  Provedor do e-mail (gmail.com, speedio.com.br)
</ResponseField>

<ResponseField name="disposable" type="boolean">
  Se é um e-mail temporário/descartável
</ResponseField>

<ResponseField name="role_account" type="boolean">
  Se é uma conta genérica (info@, contato@)
</ResponseField>

<ResponseField name="typo_suggestion" type="string">
  Sugestão de correção para erros de digitação
</ResponseField>

### 2. Validação de Telefone

#### Verificações Realizadas:
- **Formato**: Número está no formato correto
- **País**: Código do país é válido
- **Operadora**: Identifica a operadora
- **Tipo**: Fixo, móvel, ou especial
- **Região**: Localização geográfica

#### Campos Específicos:

<ResponseField name="country_code" type="string">
  Código do país (+55 para Brasil)
</ResponseField>

<ResponseField name="national_format" type="string">
  Formato nacional: (11) 98765-4321
</ResponseField>

<ResponseField name="international_format" type="string">
  Formato internacional: +55 11 98765-4321
</ResponseField>

<ResponseField name="carrier" type="string">
  Operadora (Vivo, Claro, Tim, Oi)
</ResponseField>

<ResponseField name="type" type="string">
  Tipo: mobile, landline, toll_free, premium
</ResponseField>

<ResponseField name="region" type="string">
  Região geográfica
</ResponseField>

### 3. Validação de CNPJ

#### Verificações Realizadas:
- **Dígitos**: Formato e quantidade de dígitos
- **Dígitos Verificadores**: Algoritmo de validação
- **Status**: Situação na Receita Federal
- **Tipo**: Natureza jurídica da empresa

#### Campos Específicos:

<ResponseField name="formatted" type="string">
  CNPJ formatado: 21.071.712/0001-71
</ResponseField>

<ResponseField name="digits_valid" type="boolean">
  Se tem 14 dígitos válidos
</ResponseField>

<ResponseField name="check_digits_valid" type="boolean">
  Se os dígitos verificadores estão corretos
</ResponseField>

<ResponseField name="status" type="string">
  Status na Receita: ATIVA, BAIXADA, SUSPENSA
</ResponseField>

<ResponseField name="company_type" type="string">
  Tipo de empresa: LTDA, SA, EIRELI, etc.
</ResponseField>

## Códigos de Status

<ResponseField name="200" type="success">
  **OK** - Validação realizada com sucesso
</ResponseField>

<ResponseField name="400" type="error">
  **Bad Request** - Dados inválidos ou malformados
  ```json
  {
    "error": "Invalid request",
    "message": "Data array is required and must contain at least one item"
  }
  ```
</ResponseField>

<ResponseField name="401" type="error">
  **Unauthorized** - Credenciais inválidas
</ResponseField>

<ResponseField name="413" type="error">
  **Payload Too Large** - Muitos itens para validar
  ```json
  {
    "error": "Payload too large",
    "message": "Maximum 100 items per request"
  }
  ```
</ResponseField>

<ResponseField name="429" type="error">
  **Too Many Requests** - Limite excedido
</ResponseField>

## Casos de Uso

### 1. Limpeza de Base de Dados

```javascript
async function limparBaseDados(contatos) {
  const chunk_size = 50; // Processar em lotes
  const contatosLimpos = [];
  
  for (let i = 0; i < contatos.length; i += chunk_size) {
    const lote = contatos.slice(i, i + chunk_size);
    
    // Preparar dados para validação
    const dadosValidacao = [];
    lote.forEach((contato, index) => {
      if (contato.email) {
        dadosValidacao.push({
          type: 'email',
          value: contato.email,
          id: `${contato.id}_email`
        });
      }
      if (contato.telefone) {
        dadosValidacao.push({
          type: 'phone',
          value: contato.telefone,
          id: `${contato.id}_phone`
        });
      }
    });
    
    try {
      const resultado = await validarDados(dadosValidacao);
      
      // Processar resultados
      const validacoes = {};
      resultado.validated.forEach(val => {
        validacoes[val.id] = val;
      });
      resultado.invalid.forEach(val => {
        validacoes[val.id] = val;
      });
      
      // Atualizar contatos com status de validação
      lote.forEach(contato => {
        const emailVal = validacoes[`${contato.id}_email`];
        const phoneVal = validacoes[`${contato.id}_phone`];
        
        const contatoLimpo = {
          ...contato,
          email_valido: emailVal?.valid || false,
          email_normalizado: emailVal?.normalized,
          telefone_valido: phoneVal?.valid || false,
          telefone_normalizado: phoneVal?.normalized,
          score_qualidade: calcularScoreQualidade(emailVal, phoneVal)
        };
        
        // Apenas manter contatos com pelo menos um dado válido
        if (contatoLimpo.email_valido || contatoLimpo.telefone_valido) {
          contatosLimpos.push(contatoLimpo);
        }
      });
      
      // Aguardar entre lotes para evitar rate limit
      await new Promise(resolve => setTimeout(resolve, 1000));
      
    } catch (error) {
      console.error(`Erro no lote ${i}-${i + chunk_size}:`, error.message);
    }
  }
  
  return contatosLimpos;
}

function calcularScoreQualidade(emailVal, phoneVal) {
  let score = 0;
  
  if (emailVal?.valid) {
    score += 50;
    if (!emailVal.details.disposable) score += 10;
    if (!emailVal.details.role_account) score += 10;
    if (emailVal.confidence > 0.9) score += 10;
  }
  
  if (phoneVal?.valid) {
    score += 20;
    if (phoneVal.details.type === 'mobile') score += 10;
    if (phoneVal.confidence > 0.9) score += 5;
  }
  
  return score;
}
```

### 2. Validação em Tempo Real

```javascript
// Sistema de validação em tempo real para formulários
class ValidadorTempoReal {
  constructor() {
    this.cache = new Map();
    this.pendingValidations = new Map();
  }
  
  async validarEmail(email) {
    // Verificar cache primeiro
    if (this.cache.has(email)) {
      return this.cache.get(email);
    }
    
    // Verificar se já está sendo validado
    if (this.pendingValidations.has(email)) {
      return await this.pendingValidations.get(email);
    }
    
    // Iniciar validação
    const validationPromise = this._validarEmailAPI(email);
    this.pendingValidations.set(email, validationPromise);
    
    try {
      const resultado = await validationPromise;
      
      // Cachear resultado
      this.cache.set(email, resultado);
      
      // Limpar cache após 1 hora
      setTimeout(() => {
        this.cache.delete(email);
      }, 60 * 60 * 1000);
      
      return resultado;
    } finally {
      this.pendingValidations.delete(email);
    }
  }
  
  async _validarEmailAPI(email) {
    const resultado = await validarDados([{
      type: 'email',
      value: email,
      id: 'temp'
    }]);
    
    return resultado.validated[0] || resultado.invalid[0];
  }
  
  // Validação com debounce para UX
  criarValidadorDebounced(callback, delay = 500) {
    let timeoutId;
    
    return (valor) => {
      clearTimeout(timeoutId);
      
      timeoutId = setTimeout(async () => {
        try {
          const resultado = await this.validarEmail(valor);
          callback(resultado);
        } catch (error) {
          callback({ valid: false, error: error.message });
        }
      }, delay);
    };
  }
}

// Uso em formulário
const validador = new ValidadorTempoReal();
const validarEmailDebounced = validador.criarValidadorDebounced((resultado) => {
  const input = document.getElementById('email');
  const feedback = document.getElementById('email-feedback');
  
  if (resultado.valid) {
    input.classList.add('valid');
    feedback.textContent = '✅ E-mail válido';
    
    if (resultado.details.typo_suggestion) {
      feedback.textContent += ` (Sugestão: ${resultado.details.typo_suggestion})`;
    }
  } else {
    input.classList.add('invalid');
    feedback.textContent = '❌ E-mail inválido';
  }
});

// Aplicar validação no input
document.getElementById('email').addEventListener('input', (e) => {
  validarEmailDebounced(e.target.value);
});
```

### 3. Análise de Qualidade de Base

```javascript
async function analisarQualidadeBase(dados) {
  const analise = {
    total: dados.length,
    emails: { total: 0, validos: 0, invalidos: 0, descartaveis: 0 },
    telefones: { total: 0, validos: 0, invalidos: 0, moveis: 0 },
    cnpjs: { total: 0, validos: 0, invalidos: 0, ativos: 0 },
    score_geral: 0,
    problemas_comuns: {},
    sugestoes: []
  };
  
  // Preparar dados para validação
  const dadosValidacao = [];
  dados.forEach((item, index) => {
    if (item.email) {
      dadosValidacao.push({
        type: 'email',
        value: item.email,
        id: `email_${index}`
      });
      analise.emails.total++;
    }
    
    if (item.telefone) {
      dadosValidacao.push({
        type: 'phone',
        value: item.telefone,
        id: `phone_${index}`
      });
      analise.telefones.total++;
    }
    
    if (item.cnpj) {
      dadosValidacao.push({
        type: 'cnpj',
        value: item.cnpj,
        id: `cnpj_${index}`
      });
      analise.cnpjs.total++;
    }
  });
  
  // Validar em lotes
  const chunk_size = 100;
  for (let i = 0; i < dadosValidacao.length; i += chunk_size) {
    const lote = dadosValidacao.slice(i, i + chunk_size);
    
    try {
      const resultado = await validarDados(lote);
      
      // Processar resultados válidos
      resultado.validated.forEach(item => {
        if (item.type === 'email') {
          analise.emails.validos++;
          if (item.details.disposable) analise.emails.descartaveis++;
        } else if (item.type === 'phone') {
          analise.telefones.validos++;
          if (item.details.type === 'mobile') analise.telefones.moveis++;
        } else if (item.type === 'cnpj') {
          analise.cnpjs.validos++;
          if (item.details.status === 'ATIVA') analise.cnpjs.ativos++;
        }
      });
      
      // Processar resultados inválidos
      resultado.invalid.forEach(item => {
        if (item.type === 'email') {
          analise.emails.invalidos++;
        } else if (item.type === 'phone') {
          analise.telefones.invalidos++;
        } else if (item.type === 'cnpj') {
          analise.cnpjs.invalidos++;
        }
        
        // Agrupar problemas comuns
        const problema = item.error || 'Inválido';
        analise.problemas_comuns[problema] = 
          (analise.problemas_comuns[problema] || 0) + 1;
      });
      
    } catch (error) {
      console.error(`Erro no lote ${i}:`, error.message);
    }
  }
  
  // Calcular score geral
  const totalValidos = analise.emails.validos + 
                      analise.telefones.validos + 
                      analise.cnpjs.validos;
  const totalItens = analise.emails.total + 
                    analise.telefones.total + 
                    analise.cnpjs.total;
  
  analise.score_geral = totalItens > 0 ? 
    Math.round((totalValidos / totalItens) * 100) : 0;
  
  // Gerar sugestões
  if (analise.emails.descartaveis > analise.emails.validos * 0.1) {
    analise.sugestoes.push('Muitos e-mails descartáveis detectados');
  }
  
  if (analise.telefones.validos < analise.telefones.total * 0.7) {
    analise.sugestoes.push('Baixa qualidade nos telefones');
  }
  
  if (analise.score_geral < 80) {
    analise.sugestoes.push('Considere limpar a base antes de campanhas');
  }
  
  return analise;
}

// Usar análise
const minhosContatos = [
  { email: 'contato@empresa.com', telefone: '11987654321' },
  { email: 'teste@temporary.com', telefone: '11123456789' },
  // ... mais contatos
];

const qualidade = await analisarQualidadeBase(minhosContatos);
console.log('Análise de qualidade:', qualidade);
```

## Limites e Considerações

### Rate Limits
- **200 validações por minuto** por conta
- **2000 validações por hora** por conta
- **100 itens máximo** por requisição

### Performance
- **E-mails**: 50-200ms por validação
- **Telefones**: 20-100ms por validação  
- **CNPJs**: 10-50ms por validação

### Custos
- **1 crédito** por item validado
- Validações em cache não consomem créditos adicionais

### Cache
- Resultados são cacheados por **24 horas**
- Cache baseado no valor exato (case-sensitive)

## Próximos Passos

<CardGroup cols={2}>
  <Card
    title="Buscar por CNPJ"
    icon="building"
    href="/endpoints/buscar-cnpj"
  >
    Use CNPJs validados para buscar empresas
  </Card>
  
  <Card
    title="Buscar Leads"
    icon="users"
    href="/endpoints/buscar-leads"
  >
    Encontre leads com dados já validados
  </Card>
  
  <Card
    title="Melhores Práticas"
    icon="star"
    href="/guias/melhores-praticas"
  >
    Otimize seu uso da validação
  </Card>
  
  <Card
    title="Tratamento de Erros"
    icon="exclamation-triangle"
    href="/guias/tratamento-erros"
  >
    Implemente validação robusta
  </Card>
</CardGroup>